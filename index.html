
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Title & Favicon -->
    <title>Transletter</title>
    <link rel="icon" href="assets/gui_images/favicon.png" type="image/x-icon"/>
    <!-- TODO logo/gif -->
    <!-- <link rel="icon" href="favicon.ico" type="image/x-icon"/> -->
    <!-- <link rel="shortcut icon" href="favicon.ico" type="image/x-icon"/> -->

    <!-- CSS -->
    <link rel="stylesheet" href="css/styles.css">
    <!-- <link rel="stylesheet" href="css/header_nav.css"> -->
    <!-- <link rel="stylesheet" href="assets/css/custom.css" type="text/css"> -->
    <link rel="stylesheet" href="css/iframe.css">
  </head>
  <body class="home-page-wrapper">
    <!-- JS -->
    <script src="js/jquery.min.js" type="text/javascript"></script>
    <script src="js/jquery.fittext.js"></script>

    <!-- Adjust iframe height according to content by given id -->
    <script>

      // Function to adjust the iframe height and width
      function adjustIframeSize(iframeId) {
          // Selecting the iframe element
          var frame = document.getElementById(iframeId);
          
          if (frame) {
              // Adjusting the iframe height onload event
              frame.onload = function() {
                  // Set the height of the iframe as the height of the iframe content
                  // console.log(`Iframe with ID ${iframeId} height ${frame.contentWindow.document.body.scrollHeight}.`);
                  frame.style.height = frame.contentWindow.document.body.scrollHeight + 'px';
                  // console.log(`Iframe with ID ${iframeId} height adjusted to ${frame.style.height}.`);
                  // Uncomment the line below if you also want to adjust the width
                  // frame.style.width = frame.contentWindow.document.body.scrollWidth + 'px';
              }
          } else {
              console.error(`Iframe with ID ${iframeId} not found.`);
          }
      }

document.addEventListener('DOMContentLoaded', function() {
    const sections = document.querySelectorAll('section');
    const navLinks = document.querySelectorAll('nav li');

    // Click event listener to manually activate the clicked nav item
    navLinks.forEach(item => {
        item.addEventListener('click', function() {
            navLinks.forEach(
              item => item.classList.remove('active')
            );
            this.classList.add('active');
        });
    });

    // Function to determine the active section on scroll
    function setActiveSection() {
      let currentSection = '';

      // detect current section
      sections.forEach(section => {
          const sectionTop = section.offsetTop;
          const sectionHeight = section.clientHeight;
          if (window.scrollY >= sectionTop - sectionHeight / 3) {
              currentSection = section.getAttribute('id');
          }
      });

      // remove active class from all nav links and add it to the correct one
      navLinks.forEach(item => {
        item_href = item.parentElement.getAttribute('href');
        item.classList.remove('active');
        if (item_href === `#${currentSection}`) {
          // console.log(`Current section from href: ${item_href}`);
          item.classList.add('active');
        }
      });
    }

    // Add a scroll event listener
    window.addEventListener('scroll', setActiveSection);
});

    

    // Load at top of page
    document.addEventListener('DOMContentLoaded', function() {
      // Disable browser scroll restoration
      if ('scrollRestoration' in history) {
          history.scrollRestoration = 'manual';
      }

      // Scroll to the top of the page
      window.scrollTo(0, 0);

      // Alternatively, scroll to a specific element by ID
      // document.getElementById('section1').scrollIntoView({ behavior: 'smooth' });
    });

    </script>


    <!-- circular cursor -->
    <!-- <script src="assets/js/customcursor.js"></script>
    <div class="cursor"></div> -->

    <!-- TODO verify visuals for safari & mobile (also caret in random type)-->
    

    <!-- PAGE ORDER -->

    <header>
    <!-- 0. menu & top logo -->
    <!-- TODO place correct nav names and targets -->
      <nav>
          <a href="#animated-logo-section" class="gradient-text nav-title" >
            תנואות
          </a>
        </div>
        <ul>
          <!-- <a href="about.html"> -->
          <a href="#scroll-section">
            <li>
              על הפרוייקט
            </li>
          </a>
          <a href="#tester-section">
            <li>
              הקלדה חופשית
            </li>
          </a>
          <a href="#waterfall-section">
            <li>
              האותיות
            </li>
          </a>
          <a href="#technology-section">
            <li>
              הטכנולוגיה
            </li>
          </a>
          <a href="#research-section">
            <li>
              המחקר
            </li>
          </a>
          <a href="#footer-section">
            <li>
              צור קשר
            </li>
          </a>
        </ul>
      </nav>
    </header>

    <!-- 1. Animated logo -->
    <section class="animated-logo" id="animated-logo-section">
      <iframe src="iframe_subpages/animated_transletter_logo.html" id="animated-logo-iframe"></iframe>
    </section>

    <!-- 2. animated evolution TODO raxo -->
    <section class="evolution-animated" id="evolution-section">
      <iframe src="iframe_subpages/evolution-animated.html" id="evolution-iframe"></iframe>
      <!-- <script>adjustIframeSize("evolution-iframe")</script> -->
    </section>

    <!-- 3. animate on scroll -->
    <section class="scroll_section_wrapper" id="scroll-section">
      <iframe src="iframe_subpages/scroll-section.html" id="scroll-section-iframe"></iframe>
      <script>adjustIframeSize("scroll-section-iframe")</script>
<!-- optional: scroll section iframe padding like in evolution -->
    </section>

    <!-- 4. tester -->
    <section class="tester_wrapper" id="tester-section">
      <!-- Q : flip the slider values? left to be min value, right to be max -->
      <!-- Q: do we want blinking caret on both or just title? -->
      <!-- Q: slider ranges -->
      <!-- TODO size height upon growing text size or limit height? same for title -->
      <iframe src="iframe_subpages/letter-tester.html" id="tester-iframe"></iframe>
      <!-- <script>adjustIframeSize("tester-iframe")</script> -->
    </section>


    <!-- 5. water fall -->
           <!-- TODO unify prev format -->

    <section class="waterfall" id="waterfall-section">
      <iframe src="iframe_subpages/waterfall.html" id="waterfall-iframe"></iframe>
    </section>

    <!-- 6. horizontal container -->
           <!-- TODO unify prev format -->
           <!-- TODO a bit patchy, can do cleaner / iframe -->
    <section class="horizontal_screensaver_tech" id="technology-section">
      <!-- 6.1 "screensaver" -->
      <div class="screensaver_wrapper">
        <iframe src="iframe_subpages/screen-saver.html"></iframe>
        <!-- TODO what is missing in screensaver for smooth? -->
      </div>
      <!-- 6.2 technology title -->
      <div class="technology_title">על הטכנולוגיה</div>
      
      <!-- 6.3 technology text from file -->
        <div class="technology_text" id="technology_text">Placeholder for text
          <script>
            document.addEventListener('DOMContentLoaded', function() {
            const textContainer = document.getElementById('technology_text');
            fetch('assets/content_text/technology.txt')
                .then(response => response.text())
                .then(text => {
                  // Replace newlines with <br> tags
                  const formattedText = text.replace(/\n/g, '<br>');
                  // Use innerHTML to correctly interpret <br> as line breaks
                  textContainer.innerHTML = formattedText;
                })
                .catch(err => console.error('Error loading text file:', err));
            });
          </script>
        </div>
      <!-- 6.4 Image to fit same height as text columns -->
       <!-- todo not perfect -->
      <div class="technology_image">
        <img src="assets/content_images/technology.png" alt="Technology Image">
      </div>
    </section>

    <!-- 7. random state type tester, "letter_range", gradient blue -->
           <!-- TODO unify prev format -->

    <!-- <section class="letter-range_page"> -->
    <!-- <section> TODO -->
      <!-- TODO background color toggle on faux caret -->
      <iframe src="iframe_subpages/letter-range.html" id="letter-range-iframe"></iframe>
    <!-- TODO allow to grow beyond iframe? -->
    <!-- <script>adjustIframeSize("letter-range-iframe")</script> -->
    <!-- </section> -->

    <!-- 8&9. research -->
    <section class="research" id="research-section">
            <!-- TODO unify prev format -->

      <!-- TODO format label text? -->
      <!-- TODO split into 2 frames? this 150 is not working and eating up time -->
      <iframe src="iframe_subpages/research.html" id="research-iframe"></iframe>
      <script>adjustIframeSize("research-iframe")</script>
    </section>

    <!-- 10.footer -->
    <section class="footer_page" id="footer-section">
            <!-- TODO unify prev format -->

      <iframe src="iframe_subpages/footer.html" id="footer-iframe"></iframe>
      <script>adjustIframeSize("footer-iframe")</script>
    </section>
  </body>
</html>
